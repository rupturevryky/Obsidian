# Введение 

Источник: [Лучшие сканеры уязвимостей (spy-soft.net)](https://spy-soft.net/best-vulnerability-scanners/)

Специализированный сканер уязвимостей для анализа безопасности кластеров Kubernetes. Распространяется по свободной лицензии Apache.

Этот охотник ищет косяки в удаленных кластерах, а затем одним метким выстрелом пробивает защиту. Пользоваться им следует с осторожностью, потому что в погоне за добычей он может что-нибудь испортить. Впрочем, об этом можно не беспокоиться, пока вы работаете с ним в «обыкновенном» режиме. В таком режиме он будет находить дыры, но не полезет в них сам. Если же вы решили доверить все в руки Kube-hunter, есть режим «активной» охоты.

# Установка 

Скачать сканер можно [на GitHub](https://github.com/aquasecurity/kube-hunter "на GitHub"), он написан на Python и нормально работает почти в любой ОС. Впрочем, можно использовать и Docker:

``` 
docker pull aquasec/kube-hunter
docker run --rm aquasec/kube-hunter [ARGUMENTS]
```

# Использование

После скачивания и установки зависимостей запускаем. Весь набор функций можно увидеть только с помощью дополнительных ключей запуска. Вот они:
``` 
--remote [ADDRESS] — сканировать кластер по адресу;

--cidr [CIDR] — найти и атаковать все кластеры в диапазоне адресов;
--active — тот самый режим активной охоты. Используйте, если в разрешении на пентест указано, что вы не несете ответственности за сохранность инфраструктуры заказчика. Короче, я предупредил;

--mapping — вывести все найденные узлы Kubernetes. Полезно с опцией --cidr;
--log [LEVEL] — выводить сообщения по уровню важности. [LEVEL] может быть DEBUG, INFO (по умолчанию) или WARNING;

--report [TYPE] — указывает формат вывода отчета. Может быть json, yaml или plain. Эту опцию можно сочетать со следующей;
--dispatch [MODE] — указывает, куда нужно отправить отчет после завершения сканирования. По умолчанию stdout, но можно отправить и по HTTP, тогда параметром нужно передать --dispatch http. А чтобы Kube-hunter знал, куда именно отправлять результаты, объясните ему это в переменных среды:

KUBEHUNTER_HTTP_DISPATCH_URL  (по умолчанию — https://localhost)
KUBEHUNTER_HTTP_DISPATCH_METHOD (по умолчанию — POST)
```
Очень удобная функция, которой нет в других сканерах, — возможность просматривать результаты работы на онлайновом дашборде, даже если сканер работает за **NAT** или еще как-то отгорожен от сети. Для использования фичи нужно зарегистрироваться на [сайте компании](https://kube-hunter.aquasec.com/ "сайте компании").

**Kube-hunter** можно использовать не только против удаленной цели. Еще его можно установить как **pod** и сканировать изнутри. Об этом подробнее расписано в файле **readme**.